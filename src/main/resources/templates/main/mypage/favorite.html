<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ì¦ê²¨ì°¾ê¸° ê²Œì‹œê¸€</title>
    <link rel="stylesheet" type="text/css" href="../../../static/css/mypage.css" th:href="@{/css/mypage.css}">

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
            integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script type="text/javascript" th:src="@{/js/menuactive.js}"></script>
</head>
<body>
<div>
    <div class="leftBar" th:insert="~{main/sidebar :: sidebar}">
    </div>
</div>
<div class="maincontent">
    <div class="introduce">
        <div id="topT">ë§ˆì´í˜ì´ì§€</div>
        <div>ì¦ê²¨ì°¾ê¸° ê²Œì‹œê¸€</div>
        <!-- ë©˜íŠ¸ëŠ” ëº„ê¹Œ ê³ ë¯¼ì¤‘ ì…ë‹ˆë‹¤
        <div id="subT">ë‚´ê°€ ë‹¤ì‹œ ë³´ê³ ì‹¶ì€ ê²Œì‹œê¸€ë“¤ì´ ëª¨ì—¬ìˆì–´ìš”ğŸ‘ <br>
            ì¦ê²¨ì°¾ê¸° ëª©ë¡ì— ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ ì§€ì—­ë³„ì •ë³´ ê²Œì‹œíŒì—ì„œ ë§ˆìŒì— ë“œëŠ” ê²Œì‹œê¸€ì— ì¦ê²¨ì°¾ê¸° ë“±ë¡ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”!</div>-->
    </div>
    <div id="mainLayout">
        <div id="option">

            <div>
                <select id="searchoption">
                    <option value="">ì˜µì…˜ì„ íƒ</option>
                    <option>ì œëª©</option>
                    <option>ì‘ì„±ì</option>
                </select>
            </div>

            <div>
                <input type="text" id="searchbox">
            </div>
            <div>
                <button class="favBtn" id="favsearch">ê²€ìƒ‰</button>
            </div>
            <div id="delete">
                <!--                <button class="favBtn" th:onclick="getCheck();">ì‚­ì œ</button>-->
                <!--                <button class="favBtn" id="deleteBtn" th:onclick="doDelete();">ì‚­ì œ</button>-->
                <button class="favBtn" id="deleteBtn">ì‚­ì œ</button>
            </div>
        </div>
        <div id="board">
            <table>
                <tr>
                    <th><input type="checkbox" id="checkAll" onclick="checkAll();"/></th>
                    <th>ê²Œì‹œê¸€ë²ˆí˜¸</th>
                    <th>ìœ í˜•</th>
                    <th>ì œëª©</th>
                    <th>ì‘ì„±ì</th>
                    <th>ì‘ì„±ì¼</th>
                    <th>ì§€ì—­</th>

                </tr>
                <tr th:each="bookmark: ${boardList}">
                    <!--                    <th><input type="checkbox" id="checks" name="favcheck"/></th>-->
                    <td><input type="checkbox" id="checks" name="favcheck"/></td>
                    <td th:id="boardId" th:name="boardId" th:text="${bookmark?.id}"></td>
                    <td th:text="${bookmark?.postType}"></td>
                    <td><a th:href="@{|/board/${bookmark?.id}|(page=${boardList.number + 1})}"
                           th:text="${bookmark?.title}"></a></td>
                    <td th:text="${bookmark?.userId}"></td>
                    <td th:text="*{#temporals.format(bookmark?.postdateTime, 'yy/MM/dd')}"></td>
                    <td th:text="${bookmark?.parentRegion} + ${bookmark?.childRegion}"></td>
                </tr>
            </table>
            <!--                ì²´í¬ë°•ìŠ¤ ì„ íƒí•œ id ë³´ì—¬ì¤Œ-->
<!--            <div class="col-lg-12" id="ex3_Result1"></div>-->
<!--            <div class="col-lg-12" id="ex3_Result2"></div>-->


            <!--            @{/board/paging~}ì—ì„œ /board/ë¥¼ /mypage/favorite/ë¡œ-->
            <div id="paging" th:if="${!boardList.isEmpty()}">
                <!-- ì²«ë²ˆì§¸ í˜ì´ì§€ë¡œ ì´ë™ -->
                <!-- /board/paging?page=1 -->
                <!--                <a th:href="@{/mypage/favorite/paging(page=1)}">&lt;&lt;</a>-->
                <a th:href="@{/mypage/favorite/(page=1)}">&lt;&lt;</a>
                <!-- ì´ì „ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™” -->
                <!-- boardList.getNumber() ì‚¬ìš©ì:2í˜ì´ì§€ getNumber()=1 -->
                <!--                <a th:href="${boardList?.first} ? '#' : @{/mypage/favorite/paging(page=${boardList?.number})}">&lt;</a>-->
                <a th:href="${boardList?.first} ? '#' : @{/mypage/favorite/(page=${boardList?.number})}">&lt;</a>

                <!-- í˜ì´ì§€ ë²ˆí˜¸ ë§í¬(í˜„ì¬ í˜ì´ì§€ëŠ” ìˆ«ìë§Œ)
                        for(int page=startPage; page<=endPage; page++)-->
                <span th:each="page: ${#numbers.sequence(startPage, endPage)}">
            <!-- í˜„ì¬í˜ì´ì§€ëŠ” ë§í¬ ì—†ì´ ìˆ«ìë§Œ -->
                      <span th:if="${page == boardList?.number + 1}" th:text="${page}"></span>
                    <!-- í˜„ì¬í˜ì´ì§€ ë²ˆí˜¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í˜ì´ì§€ë²ˆí˜¸ì—ëŠ” ë§í¬ë¥¼ ë³´ì—¬ì¤Œ -->
                      <span th:unless="${page == boardList.number + 1}">
<!--                          <a th:href="@{/mypage/favorite/paging(page=${page})}" th:text="${page}"></a>-->
                          <a th:href="@{/mypage/favorite/(page=${page})}" th:text="${page}"></a>
                      </span>
                  </span>

                <!-- ë‹¤ìŒ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™”
                    ì‚¬ìš©ì: 2í˜ì´ì§€, getNumber: 1, 3í˜ì´ì§€-->
                <!--                <a th:href="${boardList.last} ? '#' : @{/mypage/favorite/paging(page=${boardList.number + 2})}">&gt;</a>-->
                <a th:href="${boardList.last} ? '#' : @{/mypage/favorite/(page=${boardList.number + 2})}">&gt;</a>
                <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ë¡œ ì´ë™ -->
                <!--                <a th:href="@{/mypage/favorite/paging(page=${boardList.totalPages})}">&gt;&gt;</a>-->
                <a th:href="@{/mypage/favorite/(page=${boardList.totalPages})}">&gt;&gt;</a>
            </div>
            <div id="nonePaging" th:unless="${!boardList.isEmpty()}" style="text-align:center;">
                ì•„ì§ ë“±ë¡ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤ ğŸ¤”
            </div>
        </div>
    </div>
<!--ì²´í¬ë°•ìŠ¤ ì„ íƒëœ ê²Œì‹œê¸€ ë²ˆí˜¸ ì¶”ì¶œ-->
<script>
// ìƒë‹¨ ì„ íƒë²„íŠ¼ í´ë¦­ì‹œ ì²´í¬ëœ Rowì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
	$("#deleteBtn").click(function(){

		var rowData = new Array();
		var tdArr = new Array();
		var checkbox = $("input[name=favcheck]:checked");


		// ì²´í¬ëœ ì²´í¬ë°•ìŠ¤ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤
		checkbox.each(function(i) {

			// checkbox.parent() : checkboxì˜ ë¶€ëª¨ëŠ” <td>ì´ë‹¤.
			// checkbox.parent().parent() : <td>ì˜ ë¶€ëª¨ì´ë¯€ë¡œ <tr>ì´ë‹¤.
			var tr = checkbox.parent().parent().eq(i);
			var td = tr.children();

			// ì²´í¬ëœ rowì˜ ëª¨ë“  ê°’ì„ ë°°ì—´ì— ë‹´ëŠ”ë‹¤.
			//rowData.push(tr.text());

			// td.eq(0)ì€ ì²´í¬ë°•ìŠ¤ ì´ë¯€ë¡œ  td.eq(1)ì˜ ê°’ë¶€í„° ê°€ì ¸ì˜¨ë‹¤.
			//var no = td.eq(1).text()+", ";
			var no = td.eq(1).text();
			//var userid = td.eq(2).text()+", ";
			//var name = td.eq(3).text()+", ";
			//var email = td.eq(4).text()+", ";

			// ê°€ì ¸ì˜¨ ê°’ì„ ë°°ì—´ì— ë‹´ëŠ”ë‹¤.
			tdArr.push(no);

			//id.push(no);

			//tdArr.push(userid);
			//tdArr.push(name);
			//tdArr.push(email);

			console.log("no : " + no);
			//console.log("id : " + id);
			//console.log("userid : " + userid);
			//console.log("name : " + name);
			//console.log("email : " + email);
		});

    	//$("#ex3_Result1").html(" * ì²´í¬ëœ Rowì˜ ëª¨ë“  ë°ì´í„° = "+rowData);
    	$("#ex3_Result2").html(tdArr);
    	//$("#ex3_Result2").html(id);

		//var id = JSON.stringify(tdArr);

        $.ajax({
            url : "/mypage/favdelete",
            type : "POST",
            dataType : "JSON",
            traditional : true,
            data : {"id" : tdArr},
        })


	});
    $(document).ajaxSuccess(function(){
        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
    });
    $(document).ajaxStop(function(){
        window.location.reload();
    });
</script>



<!--error : function(request,status,error){-->
<!--alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);-->
<!--// ì‹¤íŒ¨í–ˆì„ ë•Œ ì²˜ë¦¬-->
<!--console.log(status, error);-->
<!--},-->
<!--success : function(data){-->
<!--// ì„±ê³µí–ˆì„ ë•Œ ì²˜ë¦¬-->
<!--console.log("ì„±ê³µ");-->
<!--}-->


<!--ì²´í¬ë°•ìŠ¤ All-->
<script>
   function checkAll(){
       let isChecked = document.getElementById("checkAll").checked;
       let chks = document.getElementsByName("favcheck");
       for(let i = 0 ; i<chks.length; i++){
           chks[i].checked = isChecked;
       }
      // var text = "ì „ì²´ ì„ íƒ/í•´ì œ.";
        //   alert(text);
   }



</script>

</body>
</html>