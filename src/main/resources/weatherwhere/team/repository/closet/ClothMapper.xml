<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="weatherwhere.team.repository.closet.ClothMapper">
    <insert id="save">
        <selectKey keyProperty="cId" order="BEFORE" resultType="long">
            select clothIdNum.nextval from dual
        </selectKey>
        insert into cloth_info (user_id, c_id, c_name, c_kind1, c_kind2, c_kind3, c_where_to_buy, c_color, c_photo, c_photo_path)
        values (#{userId}, #{cId}, #{cName}, #{cKind1}, #{cKind2}, #{cKind3}, #{cWhereToBuy}, #{cColor}, #{cPhoto}, #{cPhotoPath})
    </insert>

    <select id="findById" resultType="weatherwhere.team.domain.closet.Cloth">
        select *
        from cloth_info
        where c_id = #{cId} and user_id = #{userId}
    </select>

    <select id="findAll" resultType="weatherwhere.team.domain.closet.Cloth">
        select * from cloth_info where user_id = #{userId}
    </select>

    <update id="update">
        update cloth_info
        set c_name=#{updateParam.cName},
        c_kind1=#{updateParam.cKind1},
        c_kind2=#{updateParam.cKind2},
        c_kind3=#{updateParam.cKind3},
        c_where_to_buy=#{updateParam.cWhereToBuy},
        c_color=#{updateParam.cColor},
        c_photo=#{updateParam.cPhoto},
        c_photo_path=#{updateParam.cPhotoPath}
        where c_id = #{cId} and user_id = #{updateParam.userId}
    </update>

    <delete id="delete">
        delete from cloth_info
        where c_id = #{cId} and user_id = #{userId}
    </delete>

    <insert id="saveDI">
        insert into diary_info
        values (#{dId}, #{dDate}, #{dLocation1}, #{dLocation2}, #{dCody1}, #{dCody2}, #{dCody3})
    </insert>

    <insert id="saveDC">
        insert into diary_contents
        values (#{dId}, #{userId}, #{dScore}, #{dContent}, #{dPhotoName}, #{dPhotoPath})
    </insert>
</mapper>